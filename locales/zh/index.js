let socket=null;"/"===location.pathname&&localStorage.autoNavigatePage&&"en"!==localStorage.autoNavigatePage&&(window.stop(),location.pathname=localStorage.autoNavigatePage);const MessageHandler={Error:{INVALID_USER_INPUT:()=>{console.log("WS Message ERR: æ— æ•ˆçš„ç”¨æˆ·è¾“å…¥")},INVALID_PIN:()=>(resetGame(),new ErrorHandler("PINç æ— æ•ˆ")),MAX_SESSION_COUNT:()=>{setTimeout((()=>{new ErrorHandler("æ‚¨çš„IPåœ°å€å½“å‰è¿æ¥äº†å¤ªå¤šä¼šè¯/æ ‡ç­¾ã€‚"),activateLoading(!0,!0,"ä¼šè¯è¿‡å¤šã€‚ è¯·ç¨å€™ã€‚"),setTimeout((()=>{resetGame()}),3e4)}),5e3)},INVALID_NAME:e=>(clearTimeout(game.handshakeTimeout),"Duplicate name"!==e.description?(new ErrorHandler("è¿æ¥å¤±è´¥: "+(e.description||e.error||e)),resetGame()):(new ErrorHandler("åç§°æ— æ•ˆã€‚"),new LoginPage(!0))),SESSION_NOT_CONNECTED:()=>{new ErrorHandler("æ‚¨è¿˜ä¸èƒ½è¿™æ ·åšï¼› æ‚¨å°šæœªåŠ å…¥æ¸¸æˆã€‚")},EMPTY_NAME:()=>{new ErrorHandler("æ²¡æœ‰æä¾›æµ‹éªŒåç§°ã€‚ åœ¨æä¾›æ­¤ä¿¡æ¯ä¹‹å‰ï¼ŒæœåŠ¡å™¨ä¸ä¼šæœç´¢ã€‚")},HANDSHAKE:()=>{let e;switch(clearTimeout(game.handshakeTimeout),new ErrorHandler("ä¸KahootæœåŠ¡å™¨çš„è¿æ¥è¢«é˜»æ­¢ã€‚ Â¯\\_(ãƒ„)_/Â¯"),document.getElementById("handshake-fail-div")&&(document.getElementById("handshake-fail-div").outerHTML=""),detectPlatform()){case"Windows":e="https://www.mediafire.com/file/ju7sv43qn9pcio6/kahoot-win-win.zip/file";break;case"MacOS":e="https://www.mediafire.com/file/bcvxlwlfvbswe62/Kahoot_Winner.dmg/file";break;default:e="https://www.mediafire.com/file/zb5blm6a8dyrwtb/kahoot-win-linux.tar.gz/file"}const t=document.createElement("div");t.innerHTML=`<span>å—¯ï¼Œæˆ‘ä»¬ä¼¼ä¹åœ¨é‡åˆ°éº»çƒ¦ã€‚ å°è¯•<span class="mobihide">ä¸‹è½½æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºæˆ–</span>æŒ‰ä¸‹ä¸‹é¢çš„æŠ¥å‘ŠæŒ‰é’®ï¼</span>\n      <br>\n      <a class="mobihide" href="${e}" onclick="dataLayer.push({event:'download_app'})" target="_blank">ä¸‹è½½åº”ç”¨ç¨‹å¼</a>\n      <br>\n      <button onclick="send({type:'HANDSHAKE_ISSUES',message:'AAAA!'});this.innerHTML = 'å·²æŠ¥å‘Šé—®é¢˜ã€‚';this.onclick = null;dataLayer.push({event:'report_error'});" title="æ­¤æŒ‰é’®å¯èƒ½ä¼šå‡å°‘é‡ç½®æœåŠ¡å™¨çš„æ—¶é—´ã€‚">æŠ¥å‘Šé—®é¢˜</button>`,t.id="handshake-fail-div",t.style="\n        position: fixed;\n        top: 4rem;\n        z-index: 1000;\n        width: 100%;\n        color: white;\n        background: #888;\n        text-align: center;\n        border-radius: 5rem;\n      ",document.body.append(t)},PRIVATE_ID:()=>{new ErrorHandler("æä¾›çš„æµ‹éªŒIDæ— æ•ˆæˆ–å±äºç§äººæµ‹éªŒ")},SERVER_OVERLOADED:e=>{new ErrorHandler("æœåŠ¡å™¨è¶…è½½ï¼ ä½¿ç”¨æ–°æœåŠ¡å™¨ï¼š "+e),game.proxyRetry=e},SERVER_TRANSFER:e=>{new ErrorHandler("Transferring to another server..."),game.proxyRetry=e}},Message:{SetName:e=>{document.getElementById("loginInput").value=e},PinGood:e=>{const t=e.match(/\d+/g)[0];t!=game.pin&&(game.pin=t);try{TutorialDiv.innerHTML=""}catch(e){}return new LoginPage(!0)},JoinSuccess:e=>("Music"===game.theme?game.playSound("/resource/music/lobby.m4a"):"Minecraft"===game.theme&&game.playSound("/resource/music/Minecraft.mp3"),e=JSON.parse(e),game.cid=e.cid,game.quizEnded=!1,dataLayer.push({event:"join_game"}),activateLoading(!1,!1),clearTimeout(game.handshakeTimeout),new LobbyPage),QuizStart:()=>{try{game.music.pause()}catch(e){}return new QuizStartPage},QuestionGet:e=>{const t=JSON.parse(e);return new GetReadyPage(t)},QuestionBegin:e=>(game.questionAnswered=!1,new QuestionAnswererPage(JSON.parse(e))),QuestionSubmit:e=>(game.questionAnswered=!0,new QuestionSnarkPage(e)),QuestionEnd:e=>{try{game.music.pause()}catch(e){}return new QuestionEndPage(e)},QuizFinish:e=>{game.quizEnded=!0,game.end.info=JSON.parse(e),dataLayer.push(Object.assign({event:"quiz_finish"},JSON.parse(e)))},FinishText:e=>("Music"===game.theme?game.playSound("/resource/music/podium.m4a"):"Minecraft"===game.theme&&game.playSound("/resource/music/Pigstep.m4a"),new QuizEndPage(e)),QuizEnd:e=>(game.quizEnded=!0,resetGame(),setTimeout((function(){new ErrorHandler("æµ‹éªŒç»“æŸæˆ–è¢«è¸¢ã€‚ ("+e+")")}),300)),RunTwoSteps:()=>(game.two=[],new TwoStepPage),Ping:()=>{console.log("Recieved ping from server")},FailTwoStep:()=>new TwoStepPage(!0),TwoStepSuccess:()=>new LobbyPage,Maintainance:e=>new ErrorHandler("Maintainance Alert: "+e),OK:()=>{game.ready=!0},GameReset:()=>{new LobbyPage,delete game.question,delete game.guesses,delete game.answers,delete game.rawData,delete game.ans,delete game.got_answers,game.index=0,game.streak=0,game.score=0,game.quizEnded=!1},NameAccept:e=>{const t=JSON.parse(e);game.name=t.playerName;try{document.getElementById("L2").innerHTML=`<p>${t.playerName}</p>`}catch(e){}},TimeOver:()=>{new TimeUpPage},Feedback:()=>{new FeedbackPage},TeamTalk:e=>{new TeamTalkPage(JSON.parse(e))}}};class Game{constructor(){this.socket=null,this.oldQuizUUID="",this.name="",this.streak=0,this.ready=!1,this.cid="",this.pin=0,this.score=0,this.answers=[],this.quizEnded=!0,this.total=0,this.index=0,this.end={},this.two=[],this.errorTimeout=null,this.jumbleAnswer=[],this.multiAnswer={0:!1,1:!1,2:!1,3:!1},this.theme="Kahoot",this.opts={},this.correctIndex=null,this.questionStarted=!1,this.questionAnswered=!1,this.panicSettings=null}sendPin(pin,host){return new Promise((res=>{this.pin=pin,grecaptcha.ready((()=>{grecaptcha.execute("6LcyeLEZAAAAAGlTegNXayibatWwSysprt2Fb22n",{action:"submit"}).then((token=>{this.socket=new WebSocket(`${"http:"==location.protocol?"ws://":"wss://"}${host||location.host}?token=${token}`),socket=this.socket,socket.onmessage=evt=>{evt=evt.data;const data=JSON.parse(evt);if("Error"==data.type)return MessageHandler.Error[data.message](data.data);eval(`MessageHandler.${data.type}("${data.message.replace(/\\/gim,"\\\\").replace(/"/gim,'\\"')}")`)},socket.onclose=()=>{game.disconnectTime=Date.now(),game.proxyRetry||new ErrorHandler("Session disconnected."),activateLoading(!0,!0,"<br><br><br><br><p>Reconnecting</p>");let e=0;!function t(n){if(game.proxyRetry)return resetGame(game.proxyRetry);const a=new XMLHttpRequest;a.open("GET","/up"),a.send(),a.onerror=a.ontimeout=function(){if(++e>10)return location.href="https://theusaf.github.io/kahoot%20winner%20error.html";(n*=2)>30&&(n=30),setTimeout((function(){t(n)}),1e3*n)},a.onload=function(){if(200!==a.status&&304!==a.status)return a.onerror(n);activateLoading(!1,!1),game.proxyRetry?resetGame(game.proxyRetry):game.quizEnded||"0"==game.pin[0]?resetGame():resetGame(!0)}}(.5)},socket.onopen=()=>{const e=setInterval((()=>{this.ready&&(res(),send({type:"SET_PIN",message:pin}),this.loadOptions(),clearInterval(e))}),500)}})).catch((e=>{new ErrorHandler("Captcha failed: "+e),new LoginPage,activateLoading(!1)}))})),activateLoading(!0,!0)}))}join(e){this.name=e,send({type:"JOIN_GAME",message:e}),activateLoading(!0,!0),this.handshakeTimeout=setTimeout((()=>{let e;switch(document.getElementById("handshake-fail-div")&&(document.getElementById("handshake-fail-div").outerHTML=""),new ErrorHandler("This is taking a long time. If this continues longer, you may need to try again."),detectPlatform()){case"Windows":e="https://www.mediafire.com/file/ju7sv43qn9pcio6/kahoot-win-win.zip/file";break;case"MacOS":e="https://www.mediafire.com/file/bcvxlwlfvbswe62/Kahoot_Winner.dmg/file";break;default:e="https://www.mediafire.com/file/zb5blm6a8dyrwtb/kahoot-win-linux.tar.gz/file"}const t=document.createElement("div");t.innerHTML=`<span>å—¯ï¼Œæˆ‘ä»¬ä¼¼ä¹åœ¨é‡åˆ°éº»çƒ¦ã€‚ å°è¯•<span class="mobihide">ä¸‹è½½æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºæˆ–</span>æŒ‰ä¸‹ä¸‹é¢çš„æŠ¥å‘ŠæŒ‰é’®ï¼</span>\n      <br>\n      <a href="${e}" onclick="dataLayer.push({event:'download_app'})" target="_blank">ä¸‹è½½åº”ç”¨ç¨‹å¼</a>`,t.className="shortcut",t.id="handshake-fail-div",t.style="\n        position: fixed;\n        top: 4rem;\n        z-index: 1000;\n        width: 100%;\n        color: white;\n        background: #888;\n        text-align: center;\n        border-radius: 5rem;\n      ",document.body.append(t)}),1e4)}getRandom(){dataLayer.push({event:"get_random_name"}),send({type:"GET_RANDOM_NAME",message:"please?"})}saveOptions(){const e=SettingDiv.querySelectorAll("input,select"),t={};for(let n=0;n<e.length;++n)t[e[n].id]="checkbox"==e[n].type?e[n].checked:e[n].value;localStorage.options=JSON.stringify({manual:t.manual,timeout:t.timeout,brute:t.brute,fail:t.fail,teamtalk:t.teamtalk,teamMembers:t.teamMembers,theme:t.theme,previewQuestion:t.previewQuestion,searchLoosely:t.searchLoosely,ChallengeDisableAutoplay:t.ChallengeDisableAutoplay,ChallengeDisableTimer:t.ChallengeDisableTimer,div_game_options:t.div_game_options,div_search_options:t.div_search_options,div_challenge_options:t.div_search_options});const n=game.opts;game.theme=t.theme,game.opts=t,send({type:"SET_OPTS",message:JSON.stringify(t)}),game.questionStarted&&!game.questionAnswered&&n.manual&&!game.opts.manual&&send({type:"ANSWER_QUESTION",message:null})}loadOptions(){let e;try{e=JSON.parse(localStorage.options),game.opts=e,game.theme=e.theme}catch(e){return}if(e){for(const t in e){const n=document.getElementById(t);"checkbox"==n.type?n.checked=e[t]:n.value=e[t]}if(socket&&1===socket.readyState)return game.saveOptions(),dataLayer.push(Object.assign({event:"load_options"},e)),new ErrorHandler("æ¢å¤çš„é€‰é¡¹ï¼",{isNotice:!0});null!==socket&&setTimeout((()=>{this.loadOptions()}),3e3)}}answer(e){activateLoading(!0,!0),send({type:"ANSWER_QUESTION",message:e}),dataLayer.push({event:"answer",value:e,type:this.question.type})}answer2(e,t){if(t.className="faded",-1==this.two.indexOf(e))return this.two.push(e),4==this.two.length?(send({type:"DO_TWO_STEP",message:JSON.stringify(this.two)}),void activateLoading(!0,!0,"")):void 0}answerJ(e){const t=[];for(let n=0;n<e.length;n++)t.push(Number(e[n].getAttribute("index")));this.answer(t)}answerM(e,t){this.multiAnswer[e]=!this.multiAnswer[e],-1!=t.className.indexOf("correct")?t.className=this.multiAnswer[e]?"fadedm correct":"correct":t.className=this.multiAnswer[e]?"fadedm":""}updateName(){clearTimeout(this.saveTimeout);const e=/[a-f0-9]{8}(-[a-f0-9]{4}){3}-[a-f0-9]{12}/i;e.test(document.getElementById("searchTerm").value)&&(document.getElementById("uuid").value=document.getElementById("searchTerm").value.match(e)[0]),this.saveTimeout=setTimeout(this.saveOptions,500)}playSound(e,t){return this.music||(this.music=new Audio,this.music.addEventListener("timeupdate",(()=>{this.music.currentTime>this.music.duration-.44&&!this.music.once&&(this.music.currentTime=0,this.music.play())})),this.music.addEventListener("canplaythrough",(()=>{this.music.res&&this.music.res()}))),new Promise((n=>{this.music.once=t,this.music.res=n,this.music.pause(),this.music.src=e,this.music.play()}))}}function send(e){null!==socket&&socket.send(JSON.stringify(e))}function setCookie(e){localStorage.autoNavigatePage=e,location.href="en"!==e?"/"+e:"/"}let game=null;game=new Game;const eggstyle=document.createElement("style");let egg="";eggstyle.innerHTML="p,.sm span,img,h1,h2,.About h3,.tut_cont h3,h4{\n  animation: infinite windance 1s;\n}";let shouldStop=!1;function detectPlatform(){let e="Linux";return-1!=navigator.appVersion.indexOf("Win")&&(e="Windows"),-1!=navigator.appVersion.indexOf("Mac")&&(e="MacOS"),-1!=navigator.appVersion.indexOf("X11")&&(e="UNIX"),-1!=navigator.appVersion.indexOf("Linux")&&(e="Linux"),e}window.addEventListener("keydown",(async e=>{"Escape"==e.key&&(0==closePage?SettingSwitch.click():1==closePage?AboutSwitch.click():ChangelogSwitch.click()),egg+=e.key;try{if(0!=="winner".search(egg)&&0!=="return by death".search(egg)&&0!=="behold an unthinkable present".search(egg)&&0!=="explosion".search(egg)&&0!=="01189998819991197253".search(egg)){egg="",shouldStop&&(game.music.pause(),shouldStop=!1);try{document.body.removeChild(eggstyle)}catch(e){}}else if("winner"===egg)document.body.append(eggstyle);else if("01189998819991197253"===egg){await game.playSound("/resource/music/01189998819991197253.m4a",!0);const e=Element("div",{style:"position: fixed;\n          bottom: 8rem;\n          left: 0;\n          color: white;\n          font-size: 1.25rem;\n          width: 100%;\n          z-index: 500;"}),t=Element("h2",{style:"width: 21.5rem;margin:auto;"}),n="01189998819991197253",a=[.3,.5,.34,.33,.7,.23,.27,1.28,.45,.45,.5,.45,.9,.25,.34,.45,.73,.52,.5,1.77];e.append(t),document.body.append(e);for(let e=0;e<n.length;e++)await sleep(a[e]),t.innerHTML+=n[e];await sleep(1.5),t.outerHTML=""}else if("return by death"===egg)"ReZero"===game.theme&&(await game.playSound("/resource/music/return_by_death.mp3"),shouldStop=!0,document.body.style="box-shadow:inset 0 0 10rem 5rem darkviolet;",setTimeout((()=>{game.music.pause(),document.body.style=""}),2e4*Math.random()+1e4));else if("behold an unthinkable present"===egg)"ReZero"===game.theme&&(game.playSound("/resource/music/behold_unthinkable_present.m4a"),shouldStop=!0);else if("explosion"===egg&&"KonoSuba"===game.theme&&0===game.pin){await game.playSound("/resource/music/megumin_explosion.mp3",!0),document.body.style="box-shadow:inset 0 0 0.7rem 0.7rem #451b0e,inset 0 0 1.4rem 1.4rem #973716,inset 0 0 1.8rem 1.8rem #cd4606,inset 0 0 2.1rem 2.1rem #ec760c,inset 0 0 2.4rem 2.4rem #ffae34,inset 0 0 2.7rem 2.7rem #fefcc9";const e=document.createElement("img");e.src="/resource/img/game/theme/konosuba/red.svg",e.style="position:fixed;top:calc(50% - 5rem);left:100%;width:10rem;transition:left 4s;",document.body.append(e),setTimeout((()=>{e.style.left="calc(75% - 5rem)"})),setTimeout((()=>{e.style.left="150%"}),16e3),setTimeout((()=>{document.body.style="";const t=document.createElement("div");document.body.append(t),t.style="position:fixed;top:0;left:0;width:100%;height:100%;z-index:5000;transition:background 2s",t.style.background="darkorange",setTimeout((()=>{t.style.background="beige",setTimeout((()=>{e.outerHTML="",t.style.background="black",setTimeout((()=>{t.outerHTML=""}),3e3)}),3e3)}),2e3)}),21e3)}}catch(e){egg="",shouldStop&&(game.music.pause(),shouldStop=!1)}})),localStorage.KW_Version="v5.2.0";const checkVersion=new XMLHttpRequest;checkVersion.open("GET","/up"),checkVersion.send(),checkVersion.onload=function(){const e=checkVersion.response.split(": ")[1],t=localStorage.KW_Version||e;"false"!=localStorage.KW_Update&&200===checkVersion.status&&(e!=t&&new ErrorHandler("æœ‰æ–°çš„æ›´æ–°ã€‚",{permanent:!0,onclick:(t,n)=>{n.outerHTML="";const a=document.createElement("div");a.id="UpdateDiv",a.innerHTML='<h2>æœ‰æ–°çš„æ›´æ–°ã€‚</h2>\n        <h4>æ‚¨è¦ç°åœ¨æ›´æ–°å—ï¼Ÿ</h4>\n        <p>å¦‚æœæ­¤æ¶ˆæ¯æŒç»­å‡ºç°ï¼Œè¯·å°è¯•åˆ·æ–°é¡µé¢æˆ–æ¸…é™¤ç¼“å­˜ã€‚</p>\n        <button id="UpdateYes">æ˜¯</button><button id="UpdateNo">è¿˜æ²¡</button><br>\n        <button onclick="localStorage.KW_Update = false;this.parentElement.outerHTML = \'\';">ç¦ç”¨æ›´æ–°é€šçŸ¥</button>',document.body.append(a),document.getElementById("UpdateYes").onclick=function(){"serviceWorker"in navigator?(document.getElementById("UpdateYes").innerHTML="è¯·ç¨å€™...",navigator.serviceWorker.getRegistrations().then((async function(t){for(const e of t)await e.unregister();setTimeout((function(){localStorage.KW_Version=e,location.reload()}),3e3)})).catch((function(){document.getElementById("UpdateDiv").outerHTML="",new ErrorHandler("å¼ºåˆ¶æ›´æ–°æ—¶å‡ºé”™ã€‚ è¯·æ‰‹åŠ¨æ¸…é™¤æˆ–é‡æ–°åŠ è½½é¡µé¢ç¼“å­˜ã€‚")}))):(document.getElementById("UpdateDiv").outerHTML="",new ErrorHandler("å¼ºåˆ¶æ›´æ–°æ—¶å‡ºé”™ã€‚ è¯·æ‰‹åŠ¨æ¸…é™¤æˆ–é‡æ–°åŠ è½½é¡µé¢ç¼“å­˜ã€‚"))},document.getElementById("UpdateNo").onclick=function(){document.getElementById("UpdateDiv").outerHTML=""}}}),localStorage.KW_Version||(localStorage.KW_Version=e))};const AprilFoolsThemes=["KonoSuba","ReZero","FRANXX"],AprilFoolTheme=AprilFoolsThemes[Math.floor(Math.random()*AprilFoolsThemes.length)],KahootThemes={get Kahoot(){const e=new Date;return 3===e.getMonth()&&e.getDate()<=7?KahootThemes[AprilFoolTheme]:{red:"kahoot/red.svg",blue:"kahoot/blue.svg",green:"kahoot/green.svg",yellow:"kahoot/yellow.svg",get logo(){return e.getMonth()>=9&&e.getMonth()<11?"kahoot/logo-halloween.svg":11===e.getMonth()?"kahoot/logo-xmas.svg":"kahoot/logo.svg"}}},KonoSuba:{red:"konosuba/red.svg",blue:"konosuba/blue.svg",green:"konosuba/green.svg",yellow:"konosuba/yellow.svg",logo:"konosuba/logo.svg"},get Rainbow(){return KahootThemes.Kahoot},get Music(){return KahootThemes.Kahoot},FRANXX:{red:"franxx/red.svg",blue:"franxx/blue.svg",green:"franxx/green.svg",yellow:"franxx/yellow.svg",get logo(){return KahootThemes.Kahoot.logo}},ReZero:{red:"rezero/red.svg",blue:"rezero/blue.svg",green:"rezero/green.svg",yellow:"rezero/yellow.svg",logo:"rezero/logo.svg"},Minecraft:{red:"minecraft/red.svg",blue:"minecraft/blue.svg",green:"minecraft/green.svg",yellow:"minecraft/yellow.svg",logo:"minecraft/logo.png"},Duck:{logo:"duck/logo.svg",red:"duck/red.svg",green:"duck/green.svg",blue:"duck/blue.svg",yellow:"duck/yellow.svg"}};function Element(e,t){const n=document.createElement(e);for(const e in t||{})n[e]=t[e];return n}function RemoveHandshakeFail(){document.getElementById("handshake-fail-div")&&(document.getElementById("handshake-fail-div").outerHTML="")}function NotFoundDiv(){const e=Element("div",{className:"ChallengeQuestion noQuiz"}),t=Element("span");return t.innerHTML=`<input id="nameInput" placeholder="è¾“å…¥æµ‹éªŒåç§°" value="${document.getElementById("searchTerm").value.replace(/&/g,"&amp;").replace(/"/g,"&quot;")||""}" oninput="document.getElementById('searchTerm').value = this.value;game.updateName();"></input>`,e.append(Element("br"),Element("br"),t),e}class LoginPage{constructor(e){document.body.className="rainbow",Themer(),QuizResult.className="disabled button",QuizResult.removeAttribute("url"),ChallengeContinueButton.style.display="none",RemoveHandshakeFail();const t=clearUI();t.className="Login",t.setAttribute("ui-event","Login");const n=Element("img",{alt:"Kahoot logo",src:`/resource/img/game/theme/${KahootThemes[game.theme].logo}`}),a=Element("p",{id:"logotext",innerHTML:"WINNER",onclick:()=>{a.style.display="none"}}),s=Element("input",{type:e?"text":"tel",id:"loginInput",placeholder:e?"æ˜µç§°":"æ¸¸æˆå¯†ç ",onkeydown:e?e=>{if("Enter"===e.code)return game.join(s.value)}:e=>{if("Enter"===e.code)return game.sendPin(s.value)}}),o=Element("button",{innerHTML:e?"å¥½ï¼Œå‡ºå‘ï¼":"è¾“å…¥",id:"loginButton",onclick:e?()=>game.join(s.value):()=>game.sendPin(s.value)});if(e){try{document.getElementById("lang").outerHTML=""}catch(e){}const e=Element("button",{innerHTML:"è·å–éšæœºåç§°",onclick:()=>{game.getRandom()}});e.style.marginBottom="0.5rem",t.append(n,a,s,e,o),document.getElementsByClassName("grecaptcha-badge")[0].style.visibility="hidden","0"!=game.pin[0]&&(document.getElementById("div_challenge_options").parentElement.className="fadedm")}else{document.getElementById("div_challenge_options").parentElement.className="";const e=Element("label",{htmlFor:"about",innerHTML:"About",id:"abtlnk"}),l=Element("div",{id:"chnge"}),i=Element("label",{htmlFor:"changelog",innerHTML:"Changelog"}),r=Element("span",{innerHTML:"Kahootï¼ å’ŒKï¼ å¾½æ ‡æ˜¯Kahootï¼çš„å•†æ ‡ï¼ ASã€‚"}),c=Element("span",{innerHTML:'<a href="/privacy/">éšç§</a> | <a href="/terms/">æ¡æ¬¾</a>'}),m=Element("div",{id:"lang"});m.innerHTML='<label for="langToggle"><img src="/resource/img/site/language.svg"/></label>\n      <input class="ch" id="langToggle" type="checkbox"/>\n      <div class="lang">\n        <button onclick="setCookie(\'en\')">English</button>\n        <button onclick="setCookie(\'es\')">EspaÃ±ol</button>\n        <button onclick="setCookie(\'zh\')">ä¸­æ–‡</button>\n      </div>',document.getElementById("lang")||document.body.append(m),l.append(i,r,c),t.append(n,a,s,o,e,l)}const l=Element("div",{className:"sm sidebar correct"});l.innerHTML='<div class="mobihide2 mobihide">\n    <a href="/creator" target="_blank"><img src="/resource/img/site/icon-kahoot.svg" alt="create"><span>åˆ›ä½œè€…</span></a>\n    <a href="/api" target="_blank"><img src="/resource/img/site/icon-api.svg" alt="api"><span>Kahoot API</span></a>\n    <a href="/blog" target="_blank"><img src="/resource/img/site/icon-blog.svg" alt="Icon made from http://www.onlinewebfonts.com/icon is licensed by CC BY 3.0"><span>åšå®¢</span></a>\n    <a href="/blog/download" target="_blank" class="mobihide2 mobihide"><img src="/resource/img/site/icon192.png" alt="download mark"><span>åº”ç”¨ä¸‹è½½</span></a>\n    </div>\n    <a href="https://discord.gg/58SHzC2" target="_blank"><img src="/resource/img/site/logo-discord.svg" alt="discord"><span>Discord</span></a>\n    <a href="https://twitter.com/theusafyt" target="_blank"><img src="/resource/img/site/logo-twitter.svg" alt="twitter"><span>Twitter</span></a>\n    <a href="https://www.facebook.com/theusafmc" target="_blank"><img src="/resource/img/site/logo-fbook.svg" alt="facebook"><span>Facebook</span></a>',e||t.append(l),UIDiv.append(t)}}class TwoStepPage{constructor(e){new ErrorHandler(e?"2 Step Auth Failed.":"2 Step Auth Required");const t=new LobbyPage;t.mid.innerHTML="",t.main.setAttribute("ui-event","TwoFactorAuth"),document.body.className="Rainbow"==game.theme?"rainbow":"purple";const n=Element("p",{innerHTML:"PIN: "+game.pin});t.top.append(n);const a=Element("div",{className:"Answers"}),s=Element("img",{src:`/resource/img/game/theme/${KahootThemes[game.theme].red}`,alt:"Red",onclick:()=>{game.answer2(0,s)}}),o=Element("img",{src:`/resource/img/game/theme/${KahootThemes[game.theme].blue}`,alt:"Blue",onclick:()=>{game.answer2(1,o)}}),l=Element("img",{src:`/resource/img/game/theme/${KahootThemes[game.theme].green}`,alt:"Green",onclick:()=>{game.answer2(3,l)}}),i=Element("img",{src:`/resource/img/game/theme/${KahootThemes[game.theme].yellow}`,alt:"Yellow",onclick:()=>{game.answer2(2,i)}});a.append(s,o,i,l),t.main.append(a),e&&activateLoading(!1,!0)}}class ErrorHandler{constructor(e,t){const n=Element("div",{className:(t=t||{}).isNotice?"NotError":"",onclick:t.onclick?e=>{t.onclick(e,n)}:null}),a=Element("span",{innerHTML:e}),s=Element("span",{innerHTML:"X",onclick:e=>{n.outerHTML="",e.preventDefault(),e.stopPropagation()},className:"ErrorCloser"});n.append(a,s),UIError.insertBefore(n,UIError.querySelector("div"));let o=7e3;n.onclick&&(o=3e4,n.className+=" Clickable"),t.time&&(o=t.time),t.permanent||setTimeout((()=>{n.style.opacity=0,setTimeout((()=>{try{n.outerHTML=""}catch(e){}}),1e3)}),o)}}class LobbyPage{constructor(){try{document.getElementById("lang").outerHTML=""}catch(e){}RemoveHandshakeFail(),window.onbeforeunload=function(e){e.returnValue="æ‚¨ç¡®å®šè¦ç¦»å¼€é¡µé¢å—ï¼Ÿ"},document.querySelector(".ad-container").style.display="none",document.querySelector(".ad-container-2").style.display="none","0"==game.pin[0]&&game.opts.ChallengeDisableAutoplay&&(ChallengeContinueButton.style.display="");const e=clearUI();e.className="lobby",e.setAttribute("ui-event","Lobby"),document.body.className="Rainbow"==game.theme?"rainbow":"green";const t=Element("div",{id:"L1",className:"extra"}),n=Element("div",{id:"L2",className:"extra"});"Rainbow"==game.theme&&(t.className="extra rainbow");const a=Element("p",{innerText:game.name}),s=Element("h1",{className:"shadow",innerHTML:"ä½ åœ¨ï¼"}),o=Element("h2",{innerHTML:"åœ¨å±å¹•ä¸Šçœ‹åˆ°æ‚¨çš„æ˜µç§°ï¼Ÿ",className:"shadow"}),l=Element("div",{id:"UIMid"}),i=Element("div");return s.setAttribute("text","ä½ åœ¨ï¼"),o.setAttribute("text","åœ¨å±å¹•ä¸Šçœ‹åˆ°æ‚¨çš„æ˜µç§°ï¼Ÿ"),n.append(a),i.append(s,o),l.append(i),e.append(t,n,l),void 0===game.guesses&&e.append(NotFoundDiv()),UIDiv.append(e),{main:e,top:t,mid:l,bottom:n}}}class GetReadyPage{constructor(e,t){game.recievedTime=Date.now(),game.questionStarted=!1,game.jumbleAnswer=[],game.question=e;const n=new LobbyPage;try{document.querySelector(".noQuiz").outerHTML=""}catch(e){}ChallengeContinueButton.style.display="none",document.body.className="blue",n.main.setAttribute("ui-event","GetReady"),n.mid.innerHTML="";const a=Element("h1",{innerHTML:`é¢˜ ${(e.index||0)+1}`,className:"shadow"});a.setAttribute("text",a.innerText),game.answers=e.data,game.got_answers=e.cans,game.guesses=e.currentGuesses,game.total=e.ans.length,game.index=e.index||0,game.ans=e.ans,game.rawData=e.raw;const s={time:e.raw.timeAvailable||2e4};if(game.guesses.length>=1?(QuizResult.className="button",QuizResult.setAttribute("url",`https://create.kahoot.it/details/${game.guesses[0].uuid}`)):(QuizResult.className="disabled button",QuizResult.removeAttribute("url")),""!==document.getElementById("timeout_custom_1").value){const e=calculateTimeout(Number(document.getElementById("timeout_custom_1").value),s.time,0);document.getElementById("timeout").value=e/1e3,game.saveOptions()}else if(""!==document.getElementById("timeout_custom_2").value){const e=Number(document.getElementById("timeout_custom_2").value)-game.score,t=game.total-game.index;let n=0;n=e/t<500?s.time+500:calculateTimeout(e/t,s.time,game.streak),document.getElementById("timeout").value=n/1e3,game.saveOptions()}game.guesses&&game.guesses.length&&game.guesses[0].uuid!=game.oldQuizUUID&&(game.oldQuizUUID=game.guesses[0].uuid,dataLayer.push({event:"find_quiz",value:game.oldQuizUUID}));const o=Element("h2",{innerHTML:"å‡†å¤‡",className:"shadow"});o.setAttribute("text","å‡†å¤‡");const l=Element("p",{innerHTML:""+game.score,className:"dark"}),i=Element("p",{innerHTML:`${game.index+1} çš„ ${game.total}`}),r=Element("img",{alt:"",src:`/resource/img/game/type/${e.type}.svg`}),c=Element("span",{innerHTML:{quiz:"æµ‹éªŒ",open_ended:"è¾“å…¥ç­”æ¡ˆ",survey:"è½®è¯¢",jumble:"éš¾é¢˜",word_cloud:"è¯äº‘",content:"å¹»ç¯ç‰‡æ”¾æ˜ ",multiple_select_poll:"è½®è¯¢",multiple_select_quiz:"æµ‹éªŒ"}[e.type]}),m=Element("div",{id:"quizTypeImage"});if("multiple_select_quiz"===e.type?r.src="/resource/img/game/type/quiz.svg":"multiple_select_poll"===e.type?r.src="/resource/img/game/type/survey.svg":"quiz"===e.type&&"TRUE_FALSE"===game.rawData.gameBlockLayout&&(r.src="/resource/img/game/type/true_false.svg",c.innerHTML="å¯¹æˆ–é”™"),m.append(r,c),n.top.append(i,m),n.bottom.append(l),"content"==game.question.type){document.body.className="blue2";const e=Element("div"),t=Element("h1",{innerHTML:"æŠ¬å¤´",className:"shadow"});t.setAttribute("text","æŠ¬å¤´");const a=Element("h2",{innerHTML:"è¿™æ¬¡æ— éœ€å›ç­”ï¼",className:"shadow"});a.setAttribute("text","è¿™æ¬¡æ— éœ€å›ç­”ï¼");const s=Element("img",{src:"/resource/img/game/icon/content-slide.svg",id:"ContentImage"});return e.append(t,s,a),n.mid.append(e),n}if(t)return n;const u=Element("h2",{id:"timer",innerHTML:game.question.timeLeft||"5"}),d=Element("div"),g=Element("div"),p=Element("img",{src:"/resource/img/game/icon/load-large.svg",className:"load_circle",alt:"load_circle"});g.append(p,u),d.append(a,g,o),n.mid.append(d);let h=game.question.timeLeft||5;const y=setInterval((()=>{try{--h<0?clearInterval(y):(u.innerHTML=h,o.innerHTML=["èµ°ï¼","ç»„ã€‚","å‡†å¤‡"][h>=3?2:h],o.setAttribute("text",o.innerText))}catch(e){clearInterval(y)}}),1e3);if(+game.opts.searchLoosely){if(2==+game.opts.searchLoosely){const e=Element("div",{innerHTML:"<span>å‡†å¤‡</span>",className:"next"});e.addEventListener("click",(()=>{e.innerHTML="<span>ç­‰å€™â€¦</span>",e.className="faded next",function e(){if(game.questionStarted)return new QuestionAnswererPage;setTimeout((function(){e()}),500)}()})),n.main.append(e)}if(activateLoading(!1,!1),clearInterval(y),u.outerHTML="",d.outerHTML="",0==game.guesses.length)n.main.append(NotFoundDiv());else{const e=game.guesses[0].questions,t=[];for(let n=0;n<e.length;n++)if(e[n].type==game.question.type&&(e[n].layout==game.rawData.gameBlockLayout||!e[n].layout)&&("object"==typeof e[n].choices&&e[n].choices.length||null)==game.ans[game.index]){let a=!0,s=0;const o=game.got_answers.slice(0);for(let t=0;t<o.length;t++){function b(e){const{text:n,correct:a,type:s,choice:l}=o[t];switch(s){case"quiz":return null!=l&&(n===e.answer&&e.correct===a);case"open_ended":return!!a&&(n===e.answer&&e.correct);case"jumble":case"multiple_select_poll":case"multiple_select_quiz":return!!n.split("|").includes(l.answer);default:return n===e.answer&&e.correct===a}}if(e[n].choices&&e[n].choices.filter(b).length){a=!1;for(let t=0;t<e.length;t++)e[t].choices.filter(b).length&&s++;break}}if(!a&&1===s)continue;t.push({i:n,q:e[n]})}const a=Element("input",{className:"looseInput",placeholder:"é¢˜"}),s=Element("div",{className:"looseDiv"}),o=Element("div",{className:"looseOptions"}),l=e=>{o.innerHTML="";let n=!1;for(let a=0;a<t.length;a++){const s=t[a].q.question||t[a].q.title,l=/<\/?[ib]>|[^a-z0-9\s]/gim,i=/<\/?[ib]>/gim;const r=s.replace(l," ").replace(/\s+/gm," ").match(new RegExp(e.replace(l," ").replace(/\s+/gm," "),"gmi")),c=s.replace(i,"").match(new RegExp(e.replace(i,"").replace(/\[/gm,"\\[").replace(/\(/gm,"\\(").replace(/\{/gm,"\\{").replace(/\*/gm,"\\*").replace(/\+/gm,"\\+").replace(/\?/gm,"\\?").replace(/\|/gm,"\\|").replace(/\^/gm,"\\^").replace(/\$/gm,"\\$").replace(/\./gm,"\\.").replace(/\\/gm,"\\\\"),"gmi")),m=s.replace(l,"").match(new RegExp(e.replace(l,""),"gmi"));if(r||c||m){n||(game.correctIndex==t[a].i||(send({type:"CHOOSE_QUESTION_INDEX",message:t[a].i}),game.correctIndex=t[a].i,game.question.data=game.guesses[0].questions[t[a].i].choices,game.question.ans=game.ans),n=!0);const e=r||c||m,l=Element("p");let i=s;for(let t=0;t<e.length;t++)i=s.replace(e[t],"<b>"+e[t]+"</b>");l.innerHTML=i,l.addEventListener("click",(()=>{send({type:"CHOOSE_QUESTION_INDEX",message:t[a].i}),game.correctIndex=t[a].i,game.question.data=game.guesses[0].questions[t[a].i].choices,game.ans[game.index]=game.question.data?game.question.data.length:4,game.question.ans=game.ans,Array.from(o.children).forEach((e=>{e.className=""})),l.className="looseChoice"})),0===o.children.length&&(l.className="looseChoice"),o.append(l)}}};l(""),s.append(a,o),n.main.append(s),a.addEventListener("input",(()=>{l(a.value)})),a.focus()}}else if(game.opts.previewQuestion){activateLoading(!1,!1),clearInterval(y),u.outerHTML="",d.outerHTML="";const e=Element("div",{className:"ChallengeQuestion"}),t=Element("span");0==game.guesses.length?(e.className="ChallengeQuestion noQuiz",t.innerHTML=`<input id="nameInput" placeholder="è¾“å…¥æµ‹éªŒåç§°" value="${document.getElementById("searchTerm").value.replace(/&/g,"&amp;").replace(/"/g,"&quot;")||""}" oninput="document.getElementById('searchTerm').value = this.value;game.updateName();"></input><a href="https://kahoot-win.com/blog/quiz-not-found" target="_blank" class="error-info">[?]</a>`):t.innerHTML="é¢˜: "+(game.guesses[0].questions[game.index].question||game.guesses[0].questions[game.index].title),e.append(Element("br"),Element("br"),t);const a=Element("div",{className:"questionPreviewAnswers",innerHTML:"<h4>æ­£ç¡®ç­”æ¡ˆ</h4>"}),s=[];for(const e in game.answers)game.answers[e].correct&&s.push(e);for(const e in s){const t=["red","blue","yellow","green"],n=Element("template");n.innerHTML=`<div class="${game.answers[s[e]].correct?"correct":""}">\n          <img class="icon${t[s[e]]}" src="/resource/img/game/theme/${KahootThemes[game.theme][t[s[e]]]}" alt="answer choice icon">\n          <span>${game.answers[s[e]].answer}</span>\n        </div>`,a.append(n.content.cloneNode(!0))}n.main.append(a),n.main.append(e)}else 0==game.guesses.length&&n.main.append(NotFoundDiv());if(2==game.opts.fail){const e=Element("div",{className:"failChoice"}),t=Element("input",{type:"radio",name:"fail",id:"fail1"}),a=Element("input",{type:"radio",name:"fail",id:"fail2",checked:!0}),s=Element("label",{htmlFor:"fail1",innerHTML:"&nbsp;å¤±è´¥äº†&nbsp;"}),o=Element("label",{htmlFor:"fail2",innerHTML:"ä¸è¦å¤±è´¥"});e.append(t,s,a,o),n.main.append(e),s.onclick=o.onclick=function(){setTimeout((()=>{t.checked?send({type:"FAIL_CURRENT_QUESTION",message:!0}):send({type:"FAIL_CURRENT_QUESTION",message:!1})}))}}return n}}class QuizStartPage{constructor(){const e=new LobbyPage;ChallengeContinueButton.style.display="none",e.main.setAttribute("ui-event","QuizStart"),e.mid.innerHTML="";const t=Element("h1",{innerHTML:"åšå¥½å‡†å¤‡ï¼",className:"shadow"});t.setAttribute("text","åšå¥½å‡†å¤‡ï¼");const n=Element("h2",{innerHTML:"è½½å…¥ä¸­...",className:"shadow"});n.setAttribute("text","è½½å…¥ä¸­...");const a=Element("img",{src:"/resource/img/game/icon/load-hole.svg",alt:"loading...",className:"load_circle"}),s=Element("div");s.append(t,a,n),e.mid.append(s),document.body.className="purple2"}}class QuestionAnswererPage{constructor(e){if(!0===game.isAnswerPage)return game.isAnswerPage=!1;if(ChallengeContinueButton.style.display="none",2==game.opts.searchLoosely&&!game.questionStarted)return void(game.questionStarted=!0);2!=game.opts.searchLoosely||game.opts.manual||setTimeout((()=>{send({type:"ANSWER_QUESTION",message:null})}),1e3*game.opts.timeout-(Date.now()-game.recievedTime));const t=new GetReadyPage(e||game.question,!0);if(t.main.setAttribute("ui-event","QuestionAnswer"),game.receivedQuestion=!0,game.questionStarted=!0,document.body.className="Rainbow"==game.theme?"rainbow":"",t.mid.innerHTML="","content"==game.question.type){document.body.className="blue2";const e=Element("div"),n=Element("h1",{innerHTML:"æŠ¬å¤´",className:"shadow"});n.setAttribute("text","æŠ¬å¤´");const a=Element("h2",{innerHTML:"è¿™æ¬¡æ— éœ€å›ç­”ï¼",className:"shadow"});a.setAttribute("text","è¿™æ¬¡æ— éœ€å›ç­”ï¼");const s=Element("img",{src:"/resource/img/game/icon/content-slide.svg",id:"ContentImage"});return e.append(n,s,a),void t.mid.append(e)}const n=Element("div",{className:"Answers"});if("open_ended"==game.question.type||"word_cloud"==game.question.type){const e=game.answers.filter((e=>e.correct))[0],a=Element("input",{className:"openended",placeholder:e?e.answer:"",onkeydown:e=>{"Enter"===e.code&&game.answer(a.value)}}),s=Element("div",{onclick:()=>{game.answer(a.value)},innerHTML:"Submit"}),o=Element("div",{style:"margin: auto;"});HideAnswers.checked&&(a.placeholder=""),o.append(a,s),n.append(o),t.main.append(n),a.focus(),activateLoading(!1,!document.getElementById("manual").checked)}else{const e=Element("img",{src:`/resource/img/game/theme/${KahootThemes[game.theme].red}`,alt:"Red"}),s=Element("img",{src:`/resource/img/game/theme/${KahootThemes[game.theme].blue}`,alt:"Blue"}),o=Element("img",{src:`/resource/img/game/theme/${KahootThemes[game.theme].green}`,alt:"Green"}),l=Element("img",{src:`/resource/img/game/theme/${KahootThemes[game.theme].yellow}`,alt:"Yellow"}),i=[e,s,l,o],r=game.ans[game.index];for(let e=0;e<r;e++)i[e].setAttribute("draggable","false"),n.append(i[e]);if(2==game.ans[game.index]&&(e.style.maxHeight="100%",s.style.maxHeight="100%","TRUE_FALSE"==game.rawData.gameBlockLayout&&(e.setAttribute("css","layout-tfb"),s.setAttribute("css","layout-tfr"),e.src=s.src=`/resource/img/game/theme/${KahootThemes[game.theme].blue}`,s.src=`/resource/img/game/theme/${KahootThemes[game.theme].red}`)),t.main.append(n),activateLoading(!1,!document.getElementById("manual").checked),"jumble"==game.question.type){function a(e,t){const a=e.cloneNode(!0);n.append(a),a.style.left=(t.x||t.touches[0].clientX)+"px",e.style.visibility="hidden",a.className="draggable";const s=function(e){a.style.left=(e.x||e.touches[0].clientX)-16+"px",function(e,t){const a=[];let s=0,o=0;for(let e=0;e<t.length;e++){"hidden"===t[e].style.visibility&&(o=e);const n=t[e].getBoundingClientRect();s=n.width/2-16,a.push([n.x,n.x+n.width])}const l=(e.x||e.touches[0].clientX)+s;let i=0,r=1/0;for(let e=0;e<a.length;e++)Math.abs(l-a[e][0])<r&&(r=Math.abs(l-a[e][0]),i=e),Math.abs(l-a[e][1])<r&&(r=Math.abs(l-a[e][1]),i=e);"hidden"!==t[i].style.visibility&&(o>i?n.insertBefore(t[o],t[i]):n.insertBefore(t[o],t[i].nextSibling))}(e,n.querySelectorAll("img.jumble"))},o=function(){a.outerHTML="",e.style.visibility="",window.removeEventListener("mousemove",s),window.removeEventListener("touchmove",s),window.removeEventListener("mouseup",o),window.removeEventListener("touchend",o)};window.addEventListener("mousemove",s),window.addEventListener("touchmove",s),window.addEventListener("mouseup",o),window.addEventListener("touchend",o)}[e,s,l,o].forEach(((e,t)=>{e.className="jumble",e.setAttribute("index",t);const n=function(t){a(e,t)};e.addEventListener("touchstart",n),e.addEventListener("mousedown",n)})),n.className="Answers jumble";const t=Element("div",{className:"AnswerOptions"}),i=Element("img",{src:"/resource/img/game/icon/check.svg",onclick:()=>{game.answerJ(n.querySelectorAll("img.jumble"))}}),r=Element("img",{src:"/resource/img/game/icon/reset.svg",onclick:()=>{game.jumbleAnswer=[],new QuestionAnswererPage}});t.append(i,r),n.append(t)}else if("multiple_select_quiz"==game.question.type||"multiple_select_poll"==game.question.type){game.multiAnswer={0:!1,1:!1,2:!1,3:!1},e.onclick=()=>{game.answerM(0,e)},s.onclick=()=>{game.answerM(1,s)},l.onclick=()=>{game.answerM(2,l)},o.onclick=()=>{game.answerM(3,o)};const t=Element("div",{className:"AnswerOptions"}),a=Element("img",{src:"/resource/img/game/icon/check.svg",onclick:()=>{const e=[];for(const t in game.multiAnswer)game.multiAnswer[t]&&e.push(Number(t));game.answer(e)}}),i=Element("img",{src:"/resource/img/game/icon/reset.svg",onclick:()=>{game.multiAnswer={0:!1,1:!1,2:!1,3:!1},new QuestionAnswererPage}});t.append(a,i),n.append(t)}else e.onclick=()=>{game.answer(0)},s.onclick=()=>{game.answer(1)},l.onclick=()=>{game.answer(2)},o.onclick=()=>{game.answer(3)};if(HideAnswers.checked&&"0"!=game.pin[0])return;const c=Element("div",{className:"textAnswer"});n.append(c);for(let e=0;e<game.answers.length;e++){game.answers[e].image&&(i[e].style.backgroundRepeat="no-repeat",i[e].style.backgroundSize="50% 50%",i[e].style.backgroundPosition="50% 50%",i[e].style.backgroundImage="url(https://media.kahoot.it/"+game.answers[e].image.id+")",i[e].src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII="),game.answers[e].correct&&(i[e].className=("jumble"===game.question.type?"jumble ":"")+"correct");const t=Element("p");void 0===game.answers[e].answer?t.innerHTML="":t.innerHTML=("jumble"===game.question.type?e+1+". ":"")+game.answers[e].answer,c.append(t)}}try{if("Music"===game.theme)if(e.raw.timeAvailable<=5e3){const e=["005","005-1"];game.playSound(`/resource/music/${e[Math.floor(Math.random()*e.length)]}.m4a`)}else if(e.raw.timeAvailable<=1e4)game.playSound("/resource/music/010.m4a");else if(e.raw.timeAvailable<=2e4){const e=["020","020-1","020-2"];game.playSound(`/resource/music/${e[Math.floor(Math.random()*e.length)]}.m4a`)}else if(e.raw.timeAvailable<=3e4)game.playSound("/resource/music/030.m4a");else if(e.raw.timeAvailable<=6e4)game.playSound("/resource/music/060.m4a");else{const e=["120","120-1"];game.playSound(`/resource/music/${e[Math.floor(Math.random()*e.length)]}.m4a`)}}catch(e){console.warn("[MUSIC] - Failed to play.\n"+e)}if("0"==game.pin[0]){const a=Element("div",{className:"ChallengeQuestion"}),s=Element("span",{innerHTML:game.rawData.question||game.rawData.title});if(a.append(s),n.append(a),game.options.ChallengeDisableTimer)return;let o=e.raw.timeAvailable/1e3;const l=Element("p",{className:"chtimer",innerHTML:o}),i=setInterval((()=>{l.innerHTML=--o,l.isConnected||clearInterval(i)}),1e3);t.bottom.prepend(l)}else 0===game.guesses.length&&t.main.append(NotFoundDiv())}}class QuestionSnarkPage{constructor(e){const t=new GetReadyPage(game.question,!0);t.main.setAttribute("ui-event","Answered"),document.body.className="rainbow",ChallengeContinueButton.style.display="none",t.top.querySelector("div").outerHTML="";const n=Element("h2",{innerHTML:e});n.setAttribute("text",n.innerText);const a=Element("div"),s=Element("img",{src:"/resource/img/game/icon/load-hole.svg",className:"load_circle"});a.append(n,s),t.mid.append(a),0===game.guesses.length&&t.main.append(NotFoundDiv()),activateLoading(!1,!1,"",!1)}}class QuestionEndPage{constructor(e){if(void 0===(e=JSON.parse(e)).choice)return new TimeUpPage;e.isCorrect?game.streak++:game.streak=0,game.score=e.totalScore;const t=new GetReadyPage(game.question||e,!0);t.main.setAttribute("ui-event","QuestionEnd"),"0"==game.pin[0]&&game.opts.ChallengeDisableAutoplay?ChallengeContinueButton.style.display="":0===game.guesses.length&&t.main.append(NotFoundDiv()),t.mid.innerHTML="",document.body.className=e.isCorrect?"green":"red",t.bottom.querySelector(".dark").innerHTML=e.totalScore;const n=Element("h1",{innerHTML:e.isCorrect?"æ­£ç¡®":"ä¸æ­£ç¡®çš„",className:"shadow"});n.setAttribute("text",n.innerText);const a=Element("h2",{innerHTML:`ä½ åœ¨ ${e.rank||0}${1==e.rank?"st":2==e.rank?"nd":3==e.rank?"rd":"th"} ç§©`,className:"shadow"});a.setAttribute("text",a.innerText);const s=Element("h2",{className:"shadow"});try{s.innerHTML=e.nemesis.name.replace(/</gm,"&lt;")?`Just ${e.nemesis.totalScore-e.totalScore} from ${e.nemesis.name}`:"",s.setAttribute("text",s.innerHTML)}catch(e){}const o=Element("img",{id:"correctMark",src:e.isCorrect?"/resource/img/game/icon/check.svg":"/resource/img/game/icon/cross.svg"}),l=Element("h3",{innerHTML:e.isCorrect?"+"+(e.points+e.pointsData.answerStreakPoints.streakBonus):"ç»§ç»­å°è¯•ï¼",className:"shadow"}),i=Element("img",{src:"/resource/img/game/icon/fire.svg"}),r=Element("div",{id:"streakImage"}),c=Element("div"),m=Element("h2",{innerHTML:"è¿èƒœ",className:"shadow",style:"display: inline-block; font-size: 1.5rem; margin: 0"});m.setAttribute("text","è¿èƒœ"),c.style.position="relative",c.append(m);const u=Element("p",{innerHTML:e.pointsData.answerStreakPoints.streakLevel});r.append(i),r.append(u),c.append(r),e.pointsData.answerStreakPoints.streakLevel<1?(m.style.display="none",game.hadStreak&&(m.style.display="inline-block",m.innerHTML="ç­”æ¡ˆæ¶ˆå¤±",m.setAttribute("text","ç­”æ¡ˆæ¶ˆå¤±"),game.hadStreak=!1),r.style.display="none"):(game.hadStreak=!0,r.style.display="inline-block");const d=Element("div");d.append(n,o,c,l,a,s),t.mid.append(d),activateLoading(!1,!1)}}class QuizEndPage{constructor(e){let t;e=JSON.parse(e),game.endData=e,t=1==game.end.info.rank?"1<sup>st</sup>place!":2==game.end.info.rank?"2<sup>nd</sup>place!":3==game.end.info.rank?"3<sup>rd</sup>place!":game.end.info.rank<=5?"å‰5ï¼":"å·®ä¸å¤šäº†ï¼";const n=new GetReadyPage(game.question,!0);n.main.setAttribute("ui-event","QuizEnd"),n.mid.innerHTML="","0"==game.pin[0]&&game.opts.ChallengeDisableAutoplay&&(ChallengeContinueButton.style.display=""),document.body.className="purple";const a=Element("h1",{innerHTML:t}),s=Element("h2",{innerHTML:"å¥½æ¸¸æˆï¼"}),o=Element("p",{innerText:"äº«å—Kahootèµ¢å®¶å—ï¼ŸğŸ”¥ä¸æ‚¨çš„æœ‹å‹åˆ†äº«æ­¤ç½‘ç«™å¹¶èµ¢å–æ›´å¤šKahootï¼"});if(game.endData.podiumMedalType){const e=Element("img",{src:`/resource/img/game/medal/${game.endData.podiumMedalType}.svg`,alt:"Victory Medal",id:"resultMedal"});n.main.append(e)}if(n.main.append(a,s,o),!game.opts.hideAnswers){const e=Element("div",{id:"finalGuess"});e.innerHTML=`<span id="closeend">X</span>\n      <span id="kahootguess" class="out block" url="https://create.kahoot.it/details/${game.end.info.quizId}">Kahootæµ‹éªŒ</span>\n      ${game.guesses.length?`<span id="outguess" class="out block" url="https://create.kahoot.it/details/${game.guesses[0].uuid}">çŒœæµ‹éªŒ</span>`:'<span class="block disabled out">ï¼ˆæœªæ‰¾åˆ°ï¼‰</span>'}`,n.main.append(e),document.getElementById("closeend").addEventListener("click",(()=>{e.outerHTML=""}));const t=Array.from(document.getElementsByClassName("out"));if(document.getElementById("outguess")){const e=document.getElementById("outguess"),t=document.getElementById("kahootguess");e.getAttribute("url")===t.getAttribute("url")&&(e.className="out block correct")}for(const e of t)e.addEventListener("click",(()=>{e.getAttribute("url")&&window.open(e.getAttribute("url"),"_blank")}))}activateLoading(!1,!1)}}class TeamTalkPage{constructor(e){if(game.opts.teamtalk){const t=new QuestionAnswererPage(this.question||e);return game.isAnswerPage=!0,t}const{main:t,mid:n}=new GetReadyPage(this.question||e,!0);t.setAttribute("ui-event","TeamTalk"),n.innerHTML="",document.body.className="Rainbow"==game.theme?"rainbow":"cyan";const a=Element("h2",{innerHTML:"5"}),s=Element("h1",{innerHTML:"å›¢é˜Ÿè°ˆè¯",className:"shadow"});s.setAttribute("text","å›¢é˜Ÿè°ˆè¯");const o=Element("h2",{innerHTML:"è®¨è®ºç­”æ¡ˆï¼",className:"shadow"});o.setAttribute("text","è®¨è®ºç­”æ¡ˆï¼"),a.id="timer";const l=Element("img",{src:"/resource/img/game/icon/load-large.svg",className:"load_circle",alt:"load_circle"}),i=Element("div"),r=Element("div");r.append(l,a),i.append(s,r,o),n.append(i);let c=game.question.teamTalkDuration||5;const m=setInterval((()=>{try{--c<0?clearInterval(m):a.innerHTML=c}catch(e){clearInterval(m)}}),1e3)}}class TimeUpPage{constructor(){if(game.receivedQuestion)return;const{main:e,mid:t}=new LobbyPage;e.setAttribute("ui-event","TimeUp"),t.innerHTML="";try{document.querySelector(".noQuiz").outerHTML=""}catch(e){}game.guesses&&0!==game.guesses.length||e.append(NotFoundDiv()),document.body.className="Rainbow"==game.theme?"rainbow":"red";const n=Element("h1",{innerHTML:"æ—¶é—´åˆ°",className:"shadow"});n.setAttribute("text","æ—¶é—´åˆ°");const a=Element("h2",{innerHTML:"ä½ åœ¨ 0th ç§©",className:"shadow"});a.setAttribute("text","ä½ åœ¨ 0th ç§©");const s=Element("h3",{innerHTML:"æˆ‘ä»¬ä¿¡ä»»ä½ ï¼"});s.setAttribute("text","æˆ‘ä»¬ä¿¡ä»»ä½ ï¼");const o=Element("div");o.append(n,a,s),t.append(o)}}class FeedbackPage{constructor(){const{main:e,mid:t,top:n,bottom:a}=new LobbyPage;e.setAttribute("ui-event","Feedback"),t.innerHTML="";try{document.querySelector(".noQuiz").outerHTML=""}catch(e){}document.body.className="Rainbow"==game.theme?"rainbow":"",a.outerHTML="",n.className="gameOver",n.innerHTML="<p>æ¸¸æˆç»“æŸ</p>";try{document.querySelector("noQuiz").outerHTML=""}catch(e){}e.className="Feedback",e.style.padding="0";const s=Element("div",{className:"feedback"});s.innerHTML='\n    <p>æ‚¨å¦‚ä½•è¯„ä»·è¿™ä¸ªkahootï¼Ÿ</p>\n    <div class="star-container">\n      <input id="star1" type="radio" name="star" value="1"/>\n      <label for="star1"></label>\n      <input id="star2" type="radio" name="star" value="2"/>\n      <label for="star2"></label>\n      <input id="star3" type="radio" name="star" value="3"/>\n      <label for="star3"></label>\n      <input id="star4" type="radio" name="star" value="4"/>\n      <label for="star4"></label>\n      <input id="star5" type="radio" name="star" value="5"/>\n      <label for="star5"></label>\n    </div>\n    <div class="thumb-container">\n      <p>ä½ å­¦åˆ°äº†ä»€ä¹ˆå—ï¼Ÿ</p>\n      <div>\n        <input type="radio" name="learn" id="learn1" value="1"/>\n        <label for="learn1"></label>\n        <input type="radio" name="learn" id="learn2" value="0"/>\n        <label for="learn2"></label>\n      </div>\n    </div>\n    <div class="thumb-container">\n      <p>ä½ ä¼šæ¨èå—ï¼Ÿ</p>\n      <div>\n        <input type="radio" name="rec" id="rec1" value="1"/>\n        <label for="rec1"></label>\n        <input type="radio" name="rec" id="rec2" value="0"/>\n        <label for="rec2"></label>\n      </div>\n    </div>\n    <p>è¦ç»§ç»­ï¼Œè¯·å‘Šè¯‰æˆ‘ä»¬æ‚¨çš„æ„Ÿå—</p>\n    <div class="face-container">\n      <input type="radio" name="feel" id="feel1" value="1"/>\n      <label for="feel1"></label>\n      <input type="radio" name="feel" id="feel2" value="0"/>\n      <label for="feel2"></label>\n      <input type="radio" name="feel" id="feel3" value="-1"/>\n      <label for="feel3"></label>\n    </div>',e.append(s);const o=Array.from(document.querySelectorAll('[name="star"]'));for(const e of o)e.addEventListener("click",(()=>{for(const e of o)e.className="";for(let t=+e.id.split("star")[1];t>0;t--)document.getElementById("star"+t).className="selected"}));const l=document.getElementById("feel1"),i=document.getElementById("feel2"),r=document.getElementById("feel3");l.onclick=r.onclick=i.onclick=()=>{const e=(document.querySelector('input[name="star"]:checked')||{}).value,t=(document.querySelector('input[name="learn"]:checked')||{}).value,n=(document.querySelector('input[name="rec"]:checked')||{}).value,a=document.querySelector('input[name="feel"]:checked').value;return send({type:"SEND_FEEDBACK",message:{fun:+e,learn:+t,recommend:+n,overall:+a}}),new QuizEndPage(JSON.stringify(game.endData))}}}function calculateTimeout(e,t){const n=-2*t*(e/1e3-1);return n<.1?0:n}function activateLoading(e,t,n,a){HideDiv.style.background=t?"rgba(0,0,0,0.3)":"transparent",HideDiv.style.pointerEvents=t?"all":"none",HideDiv.children[0].children[0].style.display=e?"inline-block":"none",LoadingText.innerHTML=n||"",HideDiv.children[0].children[0].src=a?"/resource/img/game/icon/load-large.svg":"/resource/img/game/icon/load-hole.svg"}function setSchema(e,t,n,a){n&&e.setAttribute("itemscope",""),a&&e.setAttribute("itemtype","https://schema.org/"+t),a&&e.setAttribute("itemprop",a)}function sleep(e){return new Promise((t=>{setTimeout(t,1e3*e)}))}async function resetGame(e){try{game.music.pause()}catch(e){}const t=game;socket&&(socket.onclose=null,socket.close(),socket=null),game=new Game;const n=async e=>{e=e.data;if("Message.PinGood"==JSON.parse(e).type){new LobbyPage;let e=(25e3-(Date.now()-t.disconnectTime))/1e3;e<=2&&(e=2),new ErrorHandler("Reconnecting... Please wait. You should be reconnected when this message dissappears.",{time:1e3*e}),await sleep(e),send({message:{cid:t.cid,answers:t.got_answers},type:"RECOVER_DATA"}),t.oldQuizUUID&&(document.getElementById("uuid").value=t.oldQuizUUID),game.saveOptions()}else resetGame();socket.removeEventListener("message",n)};if(!0===e)return await game.sendPin(t.pin),void socket.addEventListener("message",n);e?await game.sendPin(t.pin,e):(new LoginPage,document.body.className="rainbow",document.getElementById("author").value="",document.getElementById("uuid").value="",document.getElementById("searchTerm").value="",document.getElementById("timeout_custom_1").value="",document.getElementById("timeout_custom_2").value="",game.loadOptions())}function clearUI(){return activateLoading(!1,!1),UIDiv.innerHTML="",Element("div")}let presetNumber=0;function loadSetting(e,t){for(const t in e){const n=document.getElementById(t);"checkbox"==n.type||"radio"==n.type?n.checked=e[t]:n.value=e[t]}game.saveOptions(),new ErrorHandler("æ¢å¤é¢„è®¾ '"+t+"'",{isNotice:!0})}function addPreset(e){game.saveOptions(),document.querySelectorAll(".preset.remove").forEach((e=>{e.outerHTML=""}));let t=[];if(localStorage.presets)try{t=JSON.parse(localStorage.presets)}catch(e){}t.push({name:e,options:{brute:game.opts.brute,fail:game.opts.fail,teamtalk:game.opts.teamtalk,manual:game.opts.manual,previewQuestion:game.opts.previewQuestion,searchLoosely:game.opts.searchLoosely,teamMembers:game.opts.teamMembers,theme:game.opts.theme,timeout:game.opts.timeout,ChallengeDisableTimer:game.opts.ChallengeDisableTimer,ChallengeDisableAutoplay:game.opts.ChallengeDisableAutoplay}}),localStorage.presets=JSON.stringify(t),loadPresets()}function loadPresets(){document.querySelectorAll(".preset.remove").forEach((e=>{e.outerHTML=""}));try{const e=JSON.parse(localStorage.presets),t=document.getElementById("preset_add_div");for(const n of e){const e=n.options,a=Element("template");a.innerHTML=`<div class="preset flex remove">\n        <div class="center">\n          <span class="presetTitle">${n.name} <label for="preset_${presetNumber}">(?)</label></span>\n          <input type="checkbox" id="preset_${presetNumber}" class="ch nosend">\n          <div>\n            <p>ä¸»é¢˜ <span class="yellow">${e.theme}</span></p>\n            <p>è¶…æ—¶ <span class="yellow">${e.timeout||"0"}</span></p>\n            <p>çƒé˜Ÿ <span class="yellow">${e.teamMembers||"(unset)"}</span></p>\n            <p>å¤±è´¥ <span class="${Number(e.fail)?"green":"red"}">${Number(e.fail)?"å¼€":"å…³"}</span></p>\n            <p>ç–æ¾ <span class="${Number(e.searchLoosely)?"green":"red"}">${Number(e.searchLoosely)?"å¼€":"å…³"}</span></p>\n            <p>è›®åŠ› <span class="${e.brute?"green":"red"}">${e.brute?"å¼€":"å…³"}</span></p>\n            <p>æ‰‹å†Œ <span class="${e.manual?"green":"red"}">${e.manual?"å¼€":"å…³"}</span></p>\n            <p>é¢„ä¹  <span class="${e.previewQuestion?"green":"red"}">${e.previewQuestion?"å¼€":"å…³"}</span></p>\n            <p>è·³è¿‡å›¢é˜Ÿè°ˆè¯ <span class="${e.teamtalk?"green":"red"}">${e.teamtalk?"å¼€":"å…³"}</span></p>\n            <p>ç¦ç”¨é—®é¢˜è®¡æ—¶å™¨ <span class="${e.ChallengeDisableTimer?"green":"red"}">${e.ChallengeDisableTimer?"å¼€":"å…³"}</span></p>\n            <p>ç¦ç”¨è‡ªåŠ¨æ’­æ”¾ <span class="${e.ChallengeDisableAutoplay?"green":"red"}">${e.ChallengeDisableAutoplay?"å¼€":"å…³"}</span></p>\n          </div>\n          <button id="restore_${presetNumber}" class="block">æ¢å¤</button>\n          <img src="/resource/img/game/icon/cross.svg" alt="delete" id="delete_${presetNumber}">\n        </div>\n      </div>`,document.getElementById("preset_container").insertBefore(a.content.cloneNode(!0),t),document.getElementById("restore_"+presetNumber).onclick=function(){loadSetting({theme:e.theme,timeout:e.timeout,teamMembers:e.teamMembers,fail:e.fail,searchLoosely:e.searchLoosely,brute:e.brute,manual:e.manual,previewQuestion:e.previewQuestion},n.name)},document.getElementById("delete_"+presetNumber).onclick=function(){try{let e=JSON.parse(localStorage.presets);e=e.filter((e=>e.name!=n.name)),localStorage.presets=JSON.stringify(e),loadPresets()}catch(e){}},presetNumber++}}catch(e){}}const ChallengeContinueButton=document.getElementById("ChallengeNext"),SettingDiv=document.getElementById("settings"),SettingSwitch=document.getElementById("menu_toggle"),AboutSwitch=document.getElementById("about"),ChangelogSwitch=document.getElementById("changelog"),HideDiv=document.getElementsByClassName("Loading")[0],UIError=document.getElementsByClassName("Error")[0],UIDiv=document.getElementsByClassName("Main")[0],HideAnswers=document.getElementById("hideAnswers"),LoadingText=document.getElementById("loadingText"),ThemeChooser=document.getElementById("theme"),QuizResult=document.getElementById("quizresult");new LoginPage(!1),loadPresets();let closePage=0;const SearchDivSettings=document.getElementById("div_search_options"),GameDivSettings=document.getElementById("div_game_options"),ChallengeDivSettings=document.getElementById("div_challenge_options"),dso=document.getElementById("dso"),dgo=document.getElementById("dgo"),dco=document.getElementById("dco");function Themer(){game.theme=ThemeChooser.value,"Rainbow"===game.theme?(SettingDiv.className="rainbow correct",document.querySelector(".About").className="About rainbow"):"FRANXX"===game.theme?(SettingDiv.className="franxx",document.querySelector(".About").className="About"):(SettingDiv.className="",document.querySelector(".About").className="About");const e=document.querySelector('.Login>img[alt="Kahoot logo"]');e&&(e.src="/resource/img/game/theme/"+KahootThemes[game.theme].logo)}SearchDivSettings.onchange=GameDivSettings.onchange=ChallengeDivSettings.onchange=function(e){switch(e.target.id){case"div_search_options":dso.className="flex selected",dgo.className="flex",dco.className="flex";break;case"div_game_options":dso.className="flex",dgo.className="flex selected",dco.className="flex";break;case"div_challenge_options":dso.className="flex",dgo.className="flex",dco.className="flex selected"}},dgo.className="flex selected",AboutSwitch.addEventListener("click",(()=>{closePage=AboutSwitch.checked?1:0})),ChangelogSwitch.addEventListener("click",(()=>{closePage=ChangelogSwitch.checked?2:0})),ChallengeContinueButton.addEventListener("click",(()=>{send({message:"",type:"NEXT_CHALLENGE"})})),SettingSwitch.onclick=()=>{SettingSwitch.checked||(dataLayer.push({event:"toggle_settings"}),document.getElementById("preset_toggle").checked&&(document.getElementById("preset_toggle").checked=!1),game.saveOptions()),closePage=0},ThemeChooser.addEventListener("change",Themer),QuizResult.addEventListener("click",(e=>{"LABEL"!==e.target.nodeName&&QuizResult.getAttribute("url")&&window.open(QuizResult.getAttribute("url"),"_blank")}));const shortcuts=e=>{if(e.ctrlKey){switch(e.key){case"e":send({type:"RECONNECT",message:"I think i lost connection"}),dataLayer.push({type:"reconnect",value:""});break;case"b":document.getElementById("brute").click(),new ErrorHandler("ç»•è¿‡2FA: "+(document.getElementById("brute").checked?"å¼€":"å…³"),{isNotice:!0}),dataLayer.push({type:"brute",value:document.getElementById("brute").checked});break;case"p":document.getElementById("fail").value=0==document.getElementById("fail").value?.9:0,new ErrorHandler("æ•…æ„å¤±è´¥: "+(0!=document.getElementById("fail").value?"å¼€":"å…³"),{isNotice:!0}),dataLayer.push({type:"fail",value:document.getElementById("fail").value});break;case"m":document.getElementById("manual").click(),new ErrorHandler("æ‰‹åŠ¨æ§åˆ¶: "+(document.getElementById("manual").checked?"å¼€":"å…³"),{isNotice:!0}),dataLayer.push({type:"manual",value:document.getElementById("manual").checked});break;case"h":document.getElementById("hideAnswers").click(),new ErrorHandler("éšè—æ­£ç¡®çš„: "+(document.getElementById("hideAnswers").checked?"å¼€":"å…³"),{isNotice:!0}),dataLayer.push({type:"hide",value:document.getElementById("hideAnswers").checked});break;case"o":document.getElementById("challengeCorrect").click(),new ErrorHandler("æŒ‘æˆ˜æ°¸è¿œæ­£ç¡®: "+(document.getElementById("challengeCorrect").checked?"å¼€":"å…³"),{isNotice:!0}),dataLayer.push({type:"correct",value:document.getElementById("challengeCorrect").checked});break;case"u":document.getElementById("previewQuestion").click(),new ErrorHandler("é¢„è§ˆé—®é¢˜: "+(document.getElementById("previewQuestion").checked?"å¼€":"å…³"),{isNotice:!0}),dataLayer.push({type:"preview",value:document.getElementById("previewQuestion").checked});break;case"j":try{if(SettingDiv.style.display){SettingDiv.style="",document.querySelector(".Changelog").style="",document.querySelector(".About").style="",document.getElementById("tutorial").style="",document.querySelector(".misc").style="",document.querySelector(".Error").style="";try{document.getElementById("logotext").style=""}catch(e){}try{document.querySelector(".sm.sidebar").style=""}catch(e){}try{document.getElementById("abtlnk").style=""}catch(e){}try{document.getElementById("chnge").style=""}catch(e){}try{document.getElementById("lang").style=""}catch(e){}}else{SettingDiv.style="display: none",document.querySelector(".Changelog").style="display: none",document.querySelector(".About").style="display: none",document.getElementById("tutorial").style="display: none",document.querySelector(".misc").style="opacity: 0",document.querySelector(".Error").style="display: none";try{document.getElementById("logotext").style="display: none"}catch(e){}try{document.querySelector(".sm.sidebar").style="display: none"}catch(e){}try{document.getElementById("abtlnk").style="display: none"}catch(e){}try{document.getElementById("chnge").style="display: none"}catch(e){}try{document.getElementById("lang").style="display: none"}catch(e){}try{document.querySelector(".grecaptcha-badge").style.visibility="hidden"}catch(e){}try{document.querySelector(".ad-container").style.display="none",document.querySelector(".ad-container-2").style.display="none"}catch(e){}}}catch(e){console.log(e)}finally{const e=document.head.querySelector('[rel="shortcut icon"]')||Element("link");e.isConnected||(e.rel="shortcut icon",e.href="https://kahoot.it/favicon.ico",document.head.append(e),document.title="Play Kahoot!"),SettingDiv.style.display?(game.panicSettings=JSON.parse(JSON.stringify(game.opts)),document.getElementById("manual").checked=!0,document.getElementById("hideAnswers").checked=!0,document.getElementById("previewQuestion").checked=!1):game.opts=game.panicSettings,game.saveOptions(),dataLayer.push({type:"panick",value:""})}break;case"d":document.getElementById("ChallengeDisableAutoplay").click(),new ErrorHandler("æŒ‘æˆ˜è‡ªåŠ¨æ¸¸æˆ: "+(document.getElementById("ChallengeDisableAutoplay").checked?"å…³":"å¼€"),{isNotice:!0}),dataLayer.push({type:"autoplay",value:document.getElementById("ChallengeDisableAutoplay").checked});break;case"k":document.getElementById("searchLoosely").value=Number(document.getElementById("searchLoosely").value)?0:1,new ErrorHandler("æ¾æ•£æœç´¢: "+(Number(document.getElementById("searchLoosely").value)?"å¼€":"å…³"),{isNotice:!0}),dataLayer.push({type:"loose",value:document.getElementById("searchLoosely").value});break;case"t":document.getElementById("teamtalk").click(),new ErrorHandler("è·³è¿‡å›¢é˜Ÿè°ˆè¯: "+(Number(document.getElementById("teamtalk").checked)?"å¼€":"å…³"),{isNotice:!0}),dataLayer.push({type:"teamtalk",value:document.getElementById("teamtalk").checked});break;default:return}dataLayer.push({event:"shortcut"}),e.preventDefault(),e.stopPropagation(),game.saveOptions()}};window.addEventListener("keydown",shortcuts),window.addEventListener("keydown",(e=>{if(game.question&&["quiz","multiple_select_quiz","multiple_select_poll","survey"].includes(game.question.type)&&document.querySelector('[alt="Red"]')&&+e.code.split("Digit")[1]<=4)switch(+e.code.split("Digit")[1]){case 0:send({type:"ANSWER_QUESTION",message:null});break;case 1:document.querySelector('[alt="Red"]').click();break;case 2:document.querySelector('[alt="Blue"]').click();break;case 3:document.querySelector('[alt="Yellow"]').click();break;case 4:document.querySelector('[alt="Green"]').click()}})),UIError.addEventListener("click",(()=>{clearTimeout(game.errorTimeout),UIError.style.right="",dataLayer.push({event:"close_error"})}));let pressTime=-1;SettingSwitch.addEventListener("click",(()=>{if(Date.now()-pressTime<500)return pressTime=-1,void shortcuts({ctrlKey:!0,key:"j",preventDefault:()=>{},stopPropagation:()=>{}});pressTime=Date.now()}));const SearchInput=document.getElementById("sub-quiz-input"),SearchOutput=document.getElementById("sub-quiz-output");let SearchIndex=0;function Search(e,t){SearchOutput.innerHTML="è½½å…¥ä¸­...";const n=new XMLHttpRequest;n.open("GET",`/search?q=${encodeURIComponent(e)}&c=${Number(t)}`),n.send(),n.onload=function(){const a=JSON.parse(n.response);if(0===a.length)return void(SearchOutput.innerHTML="æ²¡æœ‰ç»“æœã€‚");FormatSearch(a),document.getElementById("sub-quiz-next").addEventListener("click",(()=>{Search(e,(t||0)+25)}));Array.from(document.getElementsByClassName("sub-quiz-button")).forEach((e=>{e.addEventListener("click",(()=>{const t=e.nextElementSibling.value;document.getElementById("uuid").value=t,document.getElementById("sub-uuid").checked=!1}))}))}}function FormatSearch(e){SearchOutput.innerHTML='\n  <span>\n    <span class="sub-quiz-img"><img src="/resource/img/game/theme/konosuba/red.svg"/></span>\n    <span class="sub-quiz-title">æµ‹éªŒæ ‡é¢˜</span>\n    <span class="sub-quiz-author">æµ‹éªŒåˆ›ä½œè€…</span>\n    <span class="sub-quiz-questions">é—®é¢˜æ•°</span>\n    <button id="sub-quiz-next">ä¸‹ä¸€ä¸ª</button>\n  </span>\n  <hr/>\n  ';for(const t in e){const n=e[t],a=Element("template");a.innerHTML=`<span>\n      <span class="sub-quiz-img"><img src="${n.cover}"/></span>\n      <span class="sub-quiz-title">${n.title}</span>\n      <span class="sub-quiz-author">${n.creator_username}</span>\n      <span class="sub-quiz-questions">${n.questions.length}</span>\n      <button class="sub-quiz-button">Use</button>\n      <input type="text" class="ch" value="${n.uuid}"/>\n    </span>`,SearchOutput.append(a.content.cloneNode(!0))}}SearchInput.addEventListener("keydown",(e=>{"Enter"===e.code&&(SearchIndex=0,Search(SearchInput.value,SearchIndex))})),game.loadOptions(),game.theme=ThemeChooser.value,"Kahoot"!=game.theme&&new LoginPage;window.addEventListener("load",(()=>{"3.3.0"!==localStorage.returningUser&&activateTutorial()}));const TutorialDiv=document.getElementById("tutorial");function activateTutorial(){if(localStorage.returningUser="3.3.0",TutorialDiv&&TutorialDiv.innerHTML)return;AboutSwitch.checked&&AboutSwitch.click();const t=document.createElement("template");t.innerHTML='\n    <div class="tut_cont">\n      <div id="tut_data">\n        <div id="tut_info">\n          <strong>å˜¿ï¼ çœ‹æ¥æ‚¨æ˜¯æ–°æ¥çš„ã€‚ æ‚¨è¦æ•™ç¨‹å—ï¼Ÿ</strong>\n        </div>\n        <button id="tut_next" tut-step="0" onclick="tutorialSteps(this.getAttribute(\'tut-step\'))">æ˜¯çš„ï¼Œè¯·ï¼</button>\n        <button onclick="dataLayer.push({event:\'close_tutorial\'});document.getElementById(\'tutorial\').innerHTML = \'\';new ErrorHandler(\'å¦‚æœæ‚¨å†æ¬¡éœ€è¦æˆ‘ï¼Œè¯·å•å‡»â€œå…³äºâ€éƒ¨åˆ†ä¸­çš„æ•™ç¨‹æŒ‰é’®ï¼\',{isNotice:true});resetGame();">ä¸ï¼Œè°¢è°¢ã€‚</button>\n      </div>\n    </div>\n  ',TutorialDiv.append(t.content.cloneNode(!0))}function tutorialSteps(t){dataLayer.push({event:"do_tutorial",value:t});const e=document.getElementById("tut_data"),[n,i]=Array.from(document.querySelectorAll("#tut_data>button")),o=document.getElementById("tut_info");switch(n.setAttribute("tut-step",+t+1),n.innerHTML="ä¸‹ä¸€ä¸ª",i.innerHTML="å®Œæˆ",t+""){case"0":SettingSwitch.checked&&SettingSwitch.click(),o.innerHTML="<em>æ³¨æ„ï¼šåœ¨æœ¬æ•™ç¨‹ä¸­å®é™…ä¸Šä¸è¦æ‰§è¡Œä»»ä½•æ“ä½œã€‚ åªéœ€æŒ‰â€œä¸‹ä¸€æ­¥â€å’Œâ€œå®Œæˆâ€ã€‚</em>\n      <p><strong>åŠ å…¥æ¸¸æˆï¼šPIN</strong></p>\n      <p>è¦åŠ å…¥æ¸¸æˆï¼Œè¯·é¦–å…ˆè¾“å…¥æ¸¸æˆå¯†ç ã€‚</p>\n      <p>æœ‰æ•ˆçš„æ¸¸æˆå¯†ç åŒ…æ‹¬ï¼š</p>\n      <ul>\n        <li>ç°åœºæ¸¸æˆå›¾é’‰ <code>12345</code></li>\n        <li>æŒ‘æˆ˜æ¸¸æˆå›¾é’‰ <code>012345</code></li>\n        <li>æŒ‘æˆ˜æ¸¸æˆé“¾æ¥ <code>https://kahoot.it/challenge/012345?challenge-id=really-long-string</code></li>\n        <li>ç‰¹åˆ«æŒ‘æˆ˜èµ› <code>weekly</code>, <code>weekly-previous</code></li>\n      </ul>";break;case"1":SettingSwitch.checked&&SettingSwitch.click(),new LoginPage(!0),o.innerHTML="<strong>åŠ å…¥æ¸¸æˆï¼šå§“å</strong>\n      <p>æ¥ä¸‹æ¥ï¼Œè¾“å…¥åç§°ã€‚ æ‚¨ä¹Ÿå¯ä»¥æŒ‰â€œéšæœºåç§°â€æŒ‰é’®ã€‚</p>\n      <p>å‡†å¤‡å¥½åï¼ŒæŒ‰â€œå¥½ï¼Œå‡ºå‘â€</p>";break;case"2":SettingSwitch.checked&&SettingSwitch.click(),game.name="è®²è§£",game.pin="12345-LUGGAGE",new LobbyPage,e.style.marginTop="8rem",e.style.height="calc(100% - 10rem)",o.innerHTML="<p><strong>æ¸¸æˆä¸­ï¼šæä¾›æµ‹éªŒåç§°</strong></p>\n      <p>åŠ å…¥æ¸¸æˆåï¼Œæ‚¨å¯èƒ½ä¼šçœ‹åˆ°ä¸Šé¢çš„è¾“å…¥ã€‚ åœ¨æ­¤è¾“å…¥ä¸­ï¼Œåº”æ”¾ç½®æµ‹éªŒåç§°æˆ–æµ‹éªŒIDã€‚</p>\n      <p>æµ‹éªŒåç§°ä¸å¿…ç²¾ç¡®ã€‚ å¦‚æœæ‚¨çŸ¥é“æµ‹éªŒçš„ä¸€èˆ¬ä¸»é¢˜ï¼Œåˆ™å¯ä»¥å°è¯•å°†å…¶ä½œä¸ºâ€œæµ‹éªŒåç§°â€</p>\n      <p><strong>å¦‚ä½•è·å¾—æµ‹éªŒåç§°/ç¼–å·ï¼š</strong></p>\n      <p>æµ‹éªŒåç§°åœ¨è½½å…¥æµ‹éªŒä¹‹å‰ï¼ˆå¯åŠ¨é¡µé¢ï¼‰å‡ºç°åœ¨ä¸»æœºçš„å±å¹•ä¸Šï¼Œå¹¶åœ¨æµ‹éªŒå¼€å§‹æ—¶æ˜¾ç¤ºå‡ ç§’é’Ÿã€‚</p>\n      <p>æµ‹éªŒIDä½äºä¸»æŒäººå±å¹•çš„ç½‘å€ä¸­ã€‚ å®ƒæ˜¯ç´§éšå…¶åçš„é•¿å­—ç¬¦ä¸² <code>quizId=</code></p>";break;case"3":SettingSwitch.checked&&SettingSwitch.click(),o.innerHTML="<p><strong>æ¸¸æˆä¸­ï¼šæä¾›æµ‹éªŒåç§°</strong></p>\n      <p>æ­¤è¾“å…¥å°†ç»§ç»­ä¿æŒé¡¶éƒ¨ï¼Œç›´åˆ°æ‰¾åˆ°æµ‹éªŒã€‚</p>\n      <p>å¦‚æœæ‚¨ä¸æä¾›æµ‹éªŒåç§°æˆ–IDï¼ŒKahoot Winnerå°†ä½¿ç”¨è¶…è¿‡50,000ä¸ªæµ‹éªŒçš„å¤§å‹åˆ—è¡¨æ¥å°è¯•æ‰¾åˆ°æ‚¨çš„æµ‹éªŒã€‚ è¿™å¯èƒ½ä»…é€‚ç”¨äºéå¸¸æµè¡Œçš„æµ‹éªŒã€‚</p>";break;case"4":SettingSwitch.checked&&SettingSwitch.click(),e.style.marginTop="",game.question={type:"quiz",index:0,data:[{answer:"æ­£ç¡®",correct:!0},{answer:"ä¸æ­£ç¡®çš„",correct:!1},{answer:"è®²è§£",correct:!1},{answer:"",correct:!1,image:{id:"dfa9fc36-1122-4dc2-a00b-04d490c07765"}}],total:"42.069",currentGuesses:[{questions:[{time:2e4}]}],raw:{},ans:[4]},game.score=-1/0,new QuestionAnswererPage,activateLoading(!1),o.innerHTML="<p><strong>å›ç­”ï¼šåŸºæœ¬æ¦‚è¿°</strong></p>\n      <p>é»˜è®¤æƒ…å†µä¸‹ï¼ŒKahoot Winnerä¼šè‡ªåŠ¨ä½¿ç”¨æœ€ä½³ç­”æ¡ˆæ¥å›ç­”é—®é¢˜ã€‚</p>\n      <p>å¦‚æœæ‚¨æƒ³è‡ªå·±å›ç­”é—®é¢˜ï¼Œè¯·åœ¨è®¾ç½®ä¸­å¯ç”¨æ‰‹åŠ¨æ§åˆ¶ã€‚</p>";break;case"5":SettingSwitch.checked&&SettingSwitch.click(),o.innerHTML="<p><strong>å›ç­”ï¼šä¿¡æ¯</strong></p>\n      <p>å¦‚ä¸‹æ‰€ç¤ºï¼Œæ­£ç¡®çš„ç­”æ¡ˆå‘¨å›´ä¼šæœ‰å½©è™¹è¾¹æ¡†ã€‚ æ­¤å¤–ï¼Œæ¯ä¸ªé€‰é¡¹çš„æ–‡æœ¬éƒ½åˆ—åœ¨æ¯ä¸ªé€‰é¡¹ä¸Šæ–¹ã€‚</p>\n      <p>å½“é€‰æ‹©ä½¿ç”¨ä¸€ä¸ªå›¾åƒæ—¶ï¼Œå›¾åƒå°†æ›¿æ¢çš„å½¢çŠ¶ã€‚</p>";break;case"6":SettingSwitch.checked||SettingSwitch.click(),document.querySelector('[for="div_search_options"]').click(),e.style.position="absolute",o.innerHTML="<p><strong>è®¾ç½®ï¼šæœç´¢é€‰é¡¹</strong></p>\n      <p>æœç´¢é€‰é¡¹æ§åˆ¶æœåŠ¡å™¨å¦‚ä½•æ‰¾åˆ°æ‚¨çš„æµ‹éªŒã€‚</p>\n      <p>æµ‹éªŒä½œè€…-æŒ‡å®šåˆ›å»ºè€…ä»¥è¿‡æ»¤æµ‹éªŒ</p>\n      <p>æµ‹éªŒUUID-æŒ‡å®šè¦ä½¿ç”¨çš„æµ‹éªŒIDã€‚ æ‚¨ä¹Ÿå¯ä»¥åœ¨å­è®¾ç½®åŒºåŸŸä¸­ç›´æ¥æœç´¢æµ‹éªŒã€‚</p>\n      <p>æœç´¢è¯-æŒ‡å®šæµ‹éªŒåç§°/å…³é”®å­—ä»¥æœç´¢æµ‹éªŒ</p>\n      <p>å½“å‰çŒœæµ‹-æ­¤æŒ‰é’®æ˜¾ç¤ºKahoot Winnerå½“å‰æ­£åœ¨ä½¿ç”¨çš„æµ‹éªŒã€‚ æ‚¨å¯ä»¥é€šè¿‡æŒ‰é”å°†å…¶é”å®šã€‚</p>";break;case"7":SettingSwitch.checked||SettingSwitch.click(),document.querySelector('[for="div_game_options"]').click(),o.innerHTML="<p><strong>è®¾ç½®ï¼šæ¸¸æˆé€‰é¡¹</strong></p>\n      <p>æ¸¸æˆé€‰é¡¹æ§åˆ¶Kahoot Winnerä¸æ¸¸æˆäº’åŠ¨çš„æ–¹å¼ã€‚</p>\n      <p>åº”ç­”è¶…æ—¶-å»¶è¿ŸæœåŠ¡å™¨çš„åº”ç­”æ—¶é—´ï¼Œä»¥å‡å°‘æ‚¨çš„æ€€ç–‘ã€‚</p>\n      <p>å›¢é˜Ÿæˆå‘˜-åœ¨å›¢é˜Ÿæ¨¡å¼ä¸‹è‡ªå®šä¹‰æ‚¨çš„å›¢é˜Ÿæˆå‘˜</p>\n      <p>æ•…æ„å¤±è´¥-æ•…æ„å¤±è´¥é—®é¢˜</p>\n      <p>æ¾æ•£æœç´¢-å½“é—®é¢˜é¡ºåºéšæœºåŒ–æ—¶ä½¿ç”¨ã€‚ éœ€è¦ç”¨æˆ·è¾“å…¥æ‰èƒ½é€‰æ‹©æ­£ç¡®çš„é—®é¢˜ã€‚</p>\n      <p>æ—è·¯2FA-å¦‚æœå¯ç”¨ï¼Œåˆ™è·³è¿‡ä¸¤ä¸ªå› ç´ çš„æ­¥éª¤</p>\n      <p>æ‰‹åŠ¨æ§åˆ¶-å…è®¸æ‚¨å›ç­”é—®é¢˜è€Œä¸æ˜¯æœåŠ¡å™¨</p>\n      <p>è·³è¿‡å›¢é˜Ÿäº¤è°ˆ-å…è®¸æ‚¨åœ¨å›¢é˜Ÿäº¤è°ˆæœŸé—´è¿›è¡Œå›ç­”</p>\n      <p>é¢„è§ˆé—®é¢˜-å…è®¸æ‚¨æŸ¥çœ‹å³å°†å‡ºç°çš„é—®é¢˜</p>\n      <p>éšè—æ­£ç¡®-ç”¨æ¥ä½¿Kahoot Winneråœ¨å›ç­”æ—¶çœ‹èµ·æ¥åƒæ™®é€šçš„Kahootã€‚</p>";break;case"8":SettingSwitch.checked||SettingSwitch.click(),document.querySelector('[for="div_challenge_options"]').click(),o.innerHTML="<p><strong>è®¾ç½®ï¼šæŒ‘æˆ˜é€‰é¡¹</strong></p>\n      <p>æ³¨æ„ï¼šè¿™äº›é€‰é¡¹å¯¹<b>ç°åœºæ¸¸æˆ</b>ä¸èµ·ä½œç”¨</p>\n      <p>ç§¯åˆ†-å…è®¸æ‚¨è‡ªå®šä¹‰æŒ‘æˆ˜é—®é¢˜ä¸­çš„ç§¯åˆ†/é—®é¢˜æ•°é‡ã€‚</p>\n      <p>å§‹ç»ˆæ­£ç¡®-ä½¿æ‰€æœ‰ç­”æ¡ˆæ­£ç¡®ï¼Œå³ä½¿æ‚¨æ•…æ„å°†å…¶è®¾ç½®ä¸ºé”™è¯¯ã€‚</p>\n      <p>å¯ç”¨æ¡çº¹ç‚¹-è®¡ç®—ç‚¹æ—¶ä½¿ç”¨æ¡çº¹</p>\n      <p>ç¦ç”¨é—®é¢˜è®¡æ—¶å™¨-æ‚¨å¯ä»¥ç­‰å¾…å›ç­”é—®é¢˜è€Œä¸å¿…æ‹…å¿ƒè®¡æ—¶å™¨ã€‚</p>";break;case"9":e.style.position="",o.innerHTML="<p><strong>è®¾ç½®ï¼šæ›´å¤šä¿¡æ¯</strong></p>\n      <p>å¦‚æœéœ€è¦æ›´å¤šè¯´æ˜ï¼Œè¯·æ‰“å¼€è®¾ç½®ï¼Œç„¶åæŒ‰æ¯ä¸ªé€‰é¡¹æ—è¾¹çš„â€œï¼Ÿâ€ã€‚</p>";break;case"10":i.addEventListener("click",(function t(){dataLayer.push({event:"complete_tutorial"}),setTimeout((function(){return new ErrorHandler("å®Œæˆæ•™ç¨‹ï¼ è¦èµ°çš„è·¯ï¼",{isNotice:!0})}),300);try{i.removeEventListener(t)}catch(t){}})),SettingSwitch.checked&&SettingSwitch.click(),game.end={info:{rank:1}},new QuizEndPage(JSON.stringify({podiumMedalType:"gold"})),n.outerHTML="",o.innerHTML="<p><strong>æ²¡ç”¨ï¼</strong></p>\n      <p>é€šå¸¸ï¼Œå½“Kahoot Winneræ— æ³•æ­£å¸¸å·¥ä½œæ—¶ï¼Œå®ƒæ˜¯ä»¥ä¸‹é—®é¢˜ä¹‹ä¸€ï¼š</p>\n      <ol>\n        <li>æµ‹éªŒæ˜¯ç§äººçš„ã€‚</li>\n        <ul><li>æ²¡æœ‰è§£å†³æ–¹æ³•ã€‚ Kahoot Winnerä¸é€‚ç”¨äºç§äººç°åœºæ¸¸æˆã€‚</li></ul>\n        <li>æ‚¨æœªæä¾›æµ‹éªŒåç§°</li>\n        <ul><li>å°½ç®¡Kahoot Winnerç¼“å­˜äº†å¾ˆå¤šæµ‹éªŒï¼Œä½†æ•°æ®åº“ä¸­è¿˜æœ‰å¾ˆå¤šæµ‹éªŒã€‚ æä¾›æµ‹éªŒåç§°ï¼Œä»¥ç¡®ä¿Kahoot Winnerèƒ½å¤Ÿæ‰¾åˆ°å®ƒã€‚</li></ul>\n        <li>æµ‹éªŒä¸å—æ¬¢è¿</li>\n        <ul><li>å¦‚æœæ‚¨çš„æµ‹éªŒæœ‰ä¸€ä¸ªé€šç”¨åç§°å¹¶ä¸”ä¸å—æ¬¢è¿ï¼Œé‚£ä¹ˆå®ƒåœ¨Kahootsåˆ—è¡¨ä¸­å¯èƒ½å°±å¤ªè¿œäº†ï¼ŒKahoot Winneræ‰¾ä¸åˆ°å®ƒã€‚</li></ul>\n        <li>é—®é¢˜æ˜¯éšæœºçš„</li>\n        <ul><li>å¦‚æœé—®é¢˜æ˜¯éšæœºçš„ï¼Œè¯·å¯ç”¨<code>å®½æ¾æœç´¢</code>å¹¶åœ¨é—®é¢˜å¼€å§‹æ—¶é”®å…¥é—®é¢˜</li></ul>\n        <li>ç­”æ¡ˆæ˜¯éšæœºçš„</li>\n        <ul><li>å¦‚æœç­”æ¡ˆæ˜¯éšæœºçš„ï¼Œè¯·å¯ç”¨<code>æ‰‹åŠ¨</code>å¹¶æ­£ç¡®å›ç­”é—®é¢˜ã€‚</li></ul>\n      </ol>"}}